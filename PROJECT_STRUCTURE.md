# ğŸ“ AIåŒ»ç–—åŠ©æ‰‹é¡¹ç›®å®Œæ•´ç»“æ„è¯´æ˜

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº **UniApp + Vue 2 + uniCloud** çš„æ™ºèƒ½åŒ»ç–—å°ç¨‹åºé¡¹ç›®ï¼Œæä¾›AIé—®è¯Šã€å›¾åƒè¯Šæ–­ã€å¥åº·æ•°æ®è¿½è¸ªå’Œç¤¾åŒºäº¤æµç­‰åŠŸèƒ½ã€‚

---

## ğŸ“‚ é¡¹ç›®æ ¹ç›®å½•æ–‡ä»¶

### æ ¸å¿ƒé…ç½®æ–‡ä»¶

#### `manifest.json` â­ é‡è¦
**ç”¨é€”**: UniAppé¡¹ç›®é…ç½®æ–‡ä»¶
**å†…å®¹**:
- å°ç¨‹åºAppID: `wx121837575fd549e6`
- åº”ç”¨åç§°ã€ç‰ˆæœ¬å·
- å„å¹³å°ï¼ˆå¾®ä¿¡/æ”¯ä»˜å®/ç™¾åº¦ç­‰ï¼‰é…ç½®
- æƒé™é…ç½®ï¼ˆå¾®ä¿¡è¿åŠ¨ç­‰ï¼‰
- ä»£ç å‹ç¼©å’Œä¼˜åŒ–è®¾ç½®

**å…³é”®é…ç½®**:
```json
{
  "mp-weixin": {
    "appid": "wx121837575fd549e6",
    "setting": {
      "es6": true,        // ES6è½¬ES5
      "minified": true,   // ä»£ç å‹ç¼©
      "postcss": true     // CSSåå¤„ç†
    },
    "optimization": {
      "subPackages": true // åˆ†åŒ…ä¼˜åŒ–
    }
  }
}
```

#### `pages.json` â­ é‡è¦
**ç”¨é€”**: é¡µé¢è·¯ç”±é…ç½®æ–‡ä»¶
**å†…å®¹**:
- ä¸»åŒ…é¡µé¢è·¯å¾„ï¼ˆé¦–é¡µã€ä¸ªäººä¸­å¿ƒã€ç¤¾åŒºï¼‰
- åˆ†åŒ…é…ç½®ï¼ˆpagesAã€pagesBï¼‰
- å…¨å±€æ ·å¼é…ç½®
- TabBaré…ç½®ï¼ˆåº•éƒ¨å¯¼èˆªæ ï¼‰

**åˆ†åŒ…ç»“æ„**:
```
ä¸»åŒ…: pages/
  - index/index      é¦–é¡µ
  - mine/index       ä¸ªäººä¸­å¿ƒ
  - community/index  ç¤¾åŒº

åˆ†åŒ…A: pagesA/
  - ai-doctor/index      AIé—®è¯Š
  - image-diagnose/index å›¾åƒè¯Šæ–­

åˆ†åŒ…B: pagesB/
  - mine/login          ç™»å½•
  - mine/register       æ³¨å†Œ
  - mine/settings       è®¾ç½®
  - community/detail    ç¤¾åŒºè¯¦æƒ…
```

#### `main.js`
**ç”¨é€”**: é¡¹ç›®å…¥å£æ–‡ä»¶
**å†…å®¹**:
- Vueå®ä¾‹åˆå§‹åŒ–
- å…¼å®¹Vue 2å’ŒVue 3
- å¯¼å…¥å…¨å±€é…ç½®

#### `App.vue`
**ç”¨é€”**: å…¨å±€åº”ç”¨é…ç½®
**å†…å®¹**:
- åº”ç”¨ç”Ÿå‘½å‘¨æœŸ
- å…¨å±€æ ·å¼
- å…¨å±€å˜é‡

#### `package.json`
**ç”¨é€”**: npmä¾èµ–ç®¡ç†
**å†…å®¹**:
```json
{
  "dependencies": {
    "axios": "^1.11.0"  // HTTPè¯·æ±‚åº“
  }
}
```

#### `uni.scss`
**ç”¨é€”**: å…¨å±€SCSSå˜é‡å’Œæ··å…¥
**å†…å®¹**:
- å…¨å±€é¢œè‰²å˜é‡
- å…¨å±€å°ºå¯¸å˜é‡
- SCSSæ··å…¥å‡½æ•°

---

## ğŸ“± ä¸»åŒ…é¡µé¢ (pages/)

### `pages/index/` - é¦–é¡µ

#### `index.vue` â­ æ ¸å¿ƒé¡µé¢
**åŠŸèƒ½**: åŒ»ç–—åŠ©æ‰‹é¦–é¡µ
**å†…å®¹**:
- è½®æ’­å›¾ï¼ˆå¥åº·èµ„è®¯ï¼‰
- AIåŠŸèƒ½å…¥å£ï¼ˆAIé—®è¯Šã€å›¾åƒè¯Šæ–­ï¼‰
- ä»Šæ—¥å€¼ç­åŒ»ç”Ÿå±•ç¤º
- å¿«æ·åŠŸèƒ½åŒº

**è·¯ç”±**: `/pages/index/index`

**è·³è½¬**:
```javascript
'/pagesA/ai-doctor/index'      // AIé—®è¯Š
'/pagesA/image-diagnose/index' // å›¾åƒè¯Šæ–­
```

#### `simple.vue`
**åŠŸèƒ½**: ç®€åŒ–ç‰ˆé¦–é¡µï¼ˆå¤‡ç”¨ï¼‰

---

### `pages/mine/` - ä¸ªäººä¸­å¿ƒ

#### `index.vue` â­ æ ¸å¿ƒé¡µé¢
**åŠŸèƒ½**: ä¸ªäººä¸­å¿ƒä¸»é¡µ
**å†…å®¹**:
- ç”¨æˆ·ä¿¡æ¯å±•ç¤ºï¼ˆå¤´åƒã€æ˜µç§°ï¼‰
- ç™»å½•/æœªç™»å½•çŠ¶æ€åˆ‡æ¢
- å¥åº·æ•°æ®å¡ç‰‡ï¼ˆæ­¥æ•°ã€ç¡çœ ã€å¿ƒç‡ã€è¡€å‹ï¼‰
- åŠŸèƒ½åˆ—è¡¨ï¼š
  - å¥åº·æ¡£æ¡ˆï¼ˆç—…å†ã€ä½“æ£€ã€ç”¨è¯è®°å½•ï¼‰
  - æœåŠ¡è®°å½•ï¼ˆé—®è¯Šã€è¯Šæ–­è®°å½•ï¼‰
  - ç³»ç»Ÿè®¾ç½®
- åŒæ­¥å¥åº·æ•°æ®åŠŸèƒ½

**è·¯ç”±**: `/pages/mine/index`

**æ•°æ®æ¥æº**:
```javascript
import healthService from '@/utils/health-service-simple.js'
```

---

### `pages/community/` - å¥åº·ç¤¾åŒº

#### `index.vue` â­ æ ¸å¿ƒé¡µé¢
**åŠŸèƒ½**: å¥åº·ç¤¾åŒºä¸»é¡µ
**å†…å®¹**:
- åˆ†ç±»æ ‡ç­¾ï¼ˆå…¨éƒ¨ã€ç–¾ç—…ã€æ²»ç–—ã€ç”¨è¯ç­‰ï¼‰
- å¸–å­åˆ—è¡¨ï¼ˆæ ‡é¢˜ã€å†…å®¹ã€å›¾ç‰‡ã€ç‚¹èµè¯„è®ºæ•°ï¼‰
- äº’åŠ¨åŠŸèƒ½ï¼ˆç‚¹èµã€è¯„è®ºã€åˆ†äº«ã€æ”¶è—ï¼‰
- ä¸‹æ‹‰åˆ·æ–°
- ä¸Šæ‹‰åŠ è½½æ›´å¤š

**è·¯ç”±**: `/pages/community/index`

**è·³è½¬**:
```javascript
`/pagesB/community/detail?id=${post.id}` // å¸–å­è¯¦æƒ…
```

---

## ğŸ“¦ åˆ†åŒ…A (pagesA/) - AIåŠŸèƒ½

### `pagesA/ai-doctor/` - AIæ™ºèƒ½é—®è¯Š

#### `index.vue` â­ æ ¸å¿ƒåŠŸèƒ½
**åŠŸèƒ½**: AIåŒ»ç”Ÿæ™ºèƒ½é—®è¯Š
**å†…å®¹**:
- èŠå¤©ç•Œé¢ï¼ˆç”¨æˆ·æ¶ˆæ¯ã€AIå›å¤ï¼‰
- æ¶ˆæ¯è¾“å…¥æ¡†
- å¿«æ·é—®é¢˜æ¨è
- å†å²å¯¹è¯è®°å½•
- AIæœåŠ¡è°ƒç”¨

**è·¯ç”±**: `/pagesA/ai-doctor/index`

**AIæœåŠ¡**:
```javascript
import aiService from '@/utils/ai-service.js'
```

**æ”¯æŒçš„AIå¹³å°**:
- é˜¿é‡Œäº‘ç™¾ç‚¼ï¼ˆdashscopeï¼‰
- ChatGLMï¼ˆæ™ºè°±AIï¼‰
- é€šä¹‰åƒé—®ï¼ˆQwenï¼‰

---

### `pagesA/image-diagnose/` - å›¾åƒæ™ºèƒ½è¯Šæ–­

#### `index.vue` â­ æ ¸å¿ƒåŠŸèƒ½
**åŠŸèƒ½**: åŒ»å­¦å½±åƒæ™ºèƒ½åˆ†æ
**å†…å®¹**:
- å›¾ç‰‡ä¸Šä¼ ï¼ˆæ‹ç…§æˆ–ç›¸å†Œï¼‰
- å›¾åƒé¢„è§ˆ
- AIåˆ†æç»“æœå±•ç¤º
- è¯Šæ–­å»ºè®®
- å†å²è®°å½•

**è·¯ç”±**: `/pagesA/image-diagnose/index`

**AIæœåŠ¡**:
```javascript
import imageAnalysis from '@/utils/image-analysis.js'
```

**æ”¯æŒçš„åˆ†æ**:
- MRIæ‰«æåˆ†æ
- Xå…‰ç‰‡åˆ†æ
- CTå½±åƒåˆ†æ

---

## ğŸ“¦ åˆ†åŒ…B (pagesB/) - ç”¨æˆ·åŠŸèƒ½

### `pagesB/mine/` - ç”¨æˆ·ç›¸å…³

#### `login.vue` â­ æ ¸å¿ƒåŠŸèƒ½
**åŠŸèƒ½**: ç”¨æˆ·ç™»å½•
**å†…å®¹**:
- ç”¨æˆ·åå¯†ç ç™»å½•
- å¾®ä¿¡ä¸€é”®ç™»å½•
- è®°ä½å¯†ç 
- å¿˜è®°å¯†ç ï¼ˆå¼€å‘ä¸­ï¼‰
- åè®®å‹¾é€‰

**è·¯ç”±**: `/pagesB/mine/login`

**ç™»å½•æ–¹å¼**:
1. **å¾®ä¿¡ç™»å½•**:
```javascript
uni.login() â†’ è·å–code
â†’ è°ƒç”¨äº‘å‡½æ•° wechatLogin
â†’ è¿”å›tokenå’Œç”¨æˆ·ä¿¡æ¯
```

2. **è´¦å·å¯†ç ç™»å½•**:
```javascript
éªŒè¯æœ¬åœ°ç¼“å­˜ registered_users
â†’ ä¿å­˜tokenå’ŒuserInfo
â†’ è¿”å›ä¸ªäººä¸­å¿ƒ
```

#### `register.vue`
**åŠŸèƒ½**: ç”¨æˆ·æ³¨å†Œ
**å†…å®¹**:
- ç”¨æˆ·åã€å¯†ç è¾“å…¥
- æ‰‹æœºå·éªŒè¯
- éªŒè¯ç ï¼ˆå¼€å‘ä¸­ï¼‰
- åè®®å‹¾é€‰

**è·¯ç”±**: `/pagesB/mine/register`

**æ³¨å†Œæµç¨‹**:
```javascript
ä¿å­˜åˆ°æœ¬åœ°ç¼“å­˜ registered_users[]
â†’ è‡ªåŠ¨ç™»å½•
â†’ è¿”å›ä¸ªäººä¸­å¿ƒ
```

#### `settings.vue`
**åŠŸèƒ½**: ç³»ç»Ÿè®¾ç½®
**å†…å®¹**:
- ä¸ªäººä¿¡æ¯è®¾ç½®
- éšç§è®¾ç½®
- é€šçŸ¥è®¾ç½®
- æ¸…é™¤ç¼“å­˜
- é€€å‡ºç™»å½•

**è·¯ç”±**: `/pagesB/mine/settings`

---

### `pagesB/community/` - ç¤¾åŒºè¯¦æƒ…

#### `detail.vue`
**åŠŸèƒ½**: å¸–å­è¯¦æƒ…é¡µ
**å†…å®¹**:
- å¸–å­å®Œæ•´å†…å®¹
- ä½œè€…ä¿¡æ¯
- å›¾ç‰‡å±•ç¤º
- è¯„è®ºåˆ—è¡¨
- è¯„è®ºè¾“å…¥

**è·¯ç”±**: `/pagesB/community/detail?id=xxx`

---

## ğŸ›  å·¥å…·ç±» (utils/)

### `ai-service.js` â­ æ ¸å¿ƒæœåŠ¡
**åŠŸèƒ½**: AIæœåŠ¡ç»Ÿä¸€æ¥å£
**å†…å®¹**:
- å¤šAIå¹³å°é›†æˆï¼ˆé˜¿é‡Œäº‘ç™¾ç‚¼ã€ChatGLMã€Qwenï¼‰
- æµå¼å¯¹è¯æ”¯æŒ
- é”™è¯¯å¤„ç†
- APIå¯†é’¥ç®¡ç†

**ä¸»è¦æ–¹æ³•**:
```javascript
sendMessage(message, history)  // å‘é€æ¶ˆæ¯
streamChat(message, history, onChunk)  // æµå¼å¯¹è¯
```

**é…ç½®**:
```javascript
import aiConfig from '@/config/ai-config.js'
```

---

### `health-service.js` å’Œ `health-service-simple.js`
**åŠŸèƒ½**: å¥åº·æ•°æ®æœåŠ¡
**å†…å®¹**:
- å¾®ä¿¡è¿åŠ¨æ­¥æ•°è·å–
- å¥åº·æ•°æ®åŒæ­¥
- æ•°æ®åŠ å¯†è§£å¯†ï¼ˆAES-128-CBCï¼‰
- æœ¬åœ°å­˜å‚¨ç®¡ç†

**ä¸»è¦æ–¹æ³•**:
```javascript
// health-service.js (å®Œæ•´ç‰ˆ)
getWechatSteps()           // è·å–å¾®ä¿¡æ­¥æ•°
syncHealthData()           // åŒæ­¥å¥åº·æ•°æ®
saveHealthData()           // ä¿å­˜æ•°æ®

// health-service-simple.js (ç®€åŒ–ç‰ˆ)
getLocalHealthData()       // è·å–æœ¬åœ°æ•°æ®
needSync()                 // æ£€æŸ¥æ˜¯å¦éœ€è¦åŒæ­¥
```

**äº‘å‡½æ•°è°ƒç”¨**:
```javascript
uniCloud.callFunction({
  name: 'decryptWechatSteps',
  data: { encryptedData, iv, sessionKey }
})
```

---

### `image-analysis.js`
**åŠŸèƒ½**: å›¾åƒåˆ†ææœåŠ¡
**å†…å®¹**:
- å›¾ç‰‡ä¸Šä¼ å¤„ç†
- AIå›¾åƒåˆ†æ
- åŒ»å­¦å½±åƒè¯†åˆ«
- ç»“æœè§£æ

**ä¸»è¦æ–¹æ³•**:
```javascript
analyzeImage(imageData)    // åˆ†æå›¾åƒ
uploadImage(filePath)      // ä¸Šä¼ å›¾ç‰‡
```

---

## âš™ï¸ é…ç½®æ–‡ä»¶ (config/)

### `ai-config.js`
**åŠŸèƒ½**: AIå¹³å°é…ç½®
**å†…å®¹**:
```javascript
{
  platform: 'dashscope',  // æˆ– 'chatglm', 'qwen'
  apiKey: 'your-api-key',
  apiUrl: 'https://...',
  model: 'qwen-max'
}
```

### `health-config.js` â­ é‡è¦
**åŠŸèƒ½**: å¥åº·æ•°æ®é…ç½®
**å†…å®¹**:
- å¥åº·æ•°æ®æä¾›å•†ï¼ˆå°ç±³ã€åä¸ºã€å¾®ä¿¡ï¼‰
- æ•°æ®ç±»å‹ï¼ˆæ­¥æ•°ã€ç¡çœ ã€å¿ƒç‡ã€è¡€å‹ï¼‰
- åŒæ­¥è®¾ç½®
- äº‘å‡½æ•°åç§°

**é…ç½®ç¤ºä¾‹**:
```javascript
{
  providers: {
    wechat: {
      name: 'å¾®ä¿¡è¿åŠ¨',
      supportedTypes: ['steps']
    }
  },
  dataTypes: {
    steps: { name: 'æ­¥æ•°', unit: 'æ­¥' },
    sleep: { name: 'ç¡çœ ', unit: 'å°æ—¶' }
  }
}
```

### `cloud-config.js`
**åŠŸèƒ½**: uniCloudé…ç½®
**å†…å®¹**:
- äº‘å‡½æ•°åç§°
- äº‘æ•°æ®åº“é…ç½®
- æœåŠ¡ç©ºé—´ID

### `wechat-config.js`
**åŠŸèƒ½**: å¾®ä¿¡ç›¸å…³é…ç½®
**å†…å®¹**:
- å°ç¨‹åºAppID
- æƒé™é…ç½®

### `env-config.js`
**åŠŸèƒ½**: ç¯å¢ƒå˜é‡é…ç½®
**å†…å®¹**:
- å¼€å‘/ç”Ÿäº§ç¯å¢ƒåˆ‡æ¢
- APIåœ°å€é…ç½®

---

## â˜ï¸ äº‘å‡½æ•° (uniCloud-aliyun/cloudfunctions/)

### `wechatLogin/` â­ æ ¸å¿ƒåŠŸèƒ½
**åŠŸèƒ½**: å¾®ä¿¡ç™»å½•
**æ–‡ä»¶**:
- `index.js` - äº‘å‡½æ•°ä¸»æ–‡ä»¶
- `package.json` - ä¾èµ–é…ç½®

**æµç¨‹**:
```javascript
1. æ¥æ”¶code
2. è°ƒç”¨å¾®ä¿¡APIè·å–openidå’Œsession_key
3. æŸ¥è¯¢/åˆ›å»ºç”¨æˆ·è®°å½•
4. è¿”å›tokenå’Œç”¨æˆ·ä¿¡æ¯
```

**APIè°ƒç”¨**:
```javascript
https://api.weixin.qq.com/sns/jscode2session
â†’ appid + secret + code
â†’ è¿”å› openid + session_key
```

---

### `decryptWechatSteps/`
**åŠŸèƒ½**: è§£å¯†å¾®ä¿¡è¿åŠ¨æ•°æ®
**æµç¨‹**:
```javascript
1. æ¥æ”¶åŠ å¯†æ•°æ®ï¼ˆencryptedData + ivï¼‰
2. ä½¿ç”¨session_keyè§£å¯†ï¼ˆAES-128-CBCï¼‰
3. è¿”å›æ­¥æ•°æ•°æ®
```

---

### `getHealthData/`
**åŠŸèƒ½**: è·å–å¥åº·æ•°æ®
**æµç¨‹**:
```javascript
1. æŸ¥è¯¢ç”¨æˆ·å¥åº·æ•°æ®
2. è¿”å›å†å²è®°å½•
```

---

### `fun/`
**åŠŸèƒ½**: é€šç”¨å·¥å…·äº‘å‡½æ•°
**å†…å®¹**: æµ‹è¯•æˆ–è¾…åŠ©åŠŸèƒ½

---

## ğŸ–¼ï¸ é™æ€èµ„æº (static/)

### `icons/` - åŠŸèƒ½å›¾æ ‡
- `ai-icon.png` (752KB) - AIé—®è¯Šå›¾æ ‡ âš ï¸ éœ€å‹ç¼©
- `image-icon.png` (770KB) - å›¾åƒè¯Šæ–­å›¾æ ‡ âš ï¸ éœ€å‹ç¼©

### `images/` - å›¾ç‰‡ç´ æ
- `news1.png` (938KB) âš ï¸ éœ€å‹ç¼©
- `news2.png` (480KB) âš ï¸ éœ€å‹ç¼©
- `news3.png` (755KB) âš ï¸ éœ€å‹ç¼©
- `ai-avatar.png` (747KB) - AIå¤´åƒ âš ï¸ éœ€å‹ç¼©
- `user-avatar.png` (324KB) - ç”¨æˆ·å¤´åƒ âš ï¸ éœ€å‹ç¼©
- `default-avatar.png` (261KB) - é»˜è®¤å¤´åƒ âš ï¸ éœ€å‹ç¼©

### `tabbar/` - åº•éƒ¨å¯¼èˆªå›¾æ ‡
- é¦–é¡µå›¾æ ‡ï¼ˆé€‰ä¸­/æœªé€‰ä¸­ï¼‰
- ç¤¾åŒºå›¾æ ‡ï¼ˆé€‰ä¸­/æœªé€‰ä¸­ï¼‰
- æˆ‘çš„å›¾æ ‡ï¼ˆé€‰ä¸­/æœªé€‰ä¸­ï¼‰

### `logo.png`
**ç”¨é€”**: åº”ç”¨Logo

**âš ï¸ é‡è¦æç¤º**: æ‰€æœ‰å¤§äº100KBçš„å›¾ç‰‡éƒ½éœ€è¦å‹ç¼©ï¼

---

## ğŸ“„ æ–‡æ¡£ (docs/)

### `IMAGE_OPTIMIZATION.md`
**åŠŸèƒ½**: å›¾ç‰‡ä¼˜åŒ–æŒ‡å—
**å†…å®¹**:
- å›¾ç‰‡å‹ç¼©æ–¹æ³•
- åœ¨çº¿å·¥å…·æ¨è
- WebPæ ¼å¼è½¬æ¢
- CDNä½¿ç”¨å»ºè®®

### `README.md`
**åŠŸèƒ½**: é¡¹ç›®è¯´æ˜æ–‡æ¡£
**å†…å®¹**:
- åŠŸèƒ½åˆ—è¡¨
- å¿«é€Ÿå¼€å§‹
- æŠ€æœ¯æ ˆ
- é…ç½®è¯´æ˜

---

## ğŸ“ å…¶ä»–é‡è¦æ–‡ä»¶

### `CLAUDE.md`
**åŠŸèƒ½**: Claude Codeé¡¹ç›®æ¦‚è¿°
**å†…å®¹**:
- é¡¹ç›®ä»‹ç»
- ä»£ç åº“ç»“æ„
- å¼€å‘å‘½ä»¤
- AIé›†æˆè¯´æ˜

### `OPTIMIZATION_SUMMARY.md`
**åŠŸèƒ½**: ä¼˜åŒ–ä¿®å¤æ€»ç»“
**å†…å®¹**:
- ä»£ç å‹ç¼©é…ç½®
- åˆ†åŒ…é…ç½®
- æ–‡ä»¶ç§»åŠ¨è®°å½•
- æ€§èƒ½æå‡æ•°æ®

### `.gitignore`
**åŠŸèƒ½**: Gitå¿½ç•¥é…ç½®
**å†…å®¹**:
- `node_modules/` - ä¾èµ–æ–‡ä»¶
- `unpackage/` - ç¼–è¯‘è¾“å‡º
- `.hbuilderx/` - ç¼–è¾‘å™¨é…ç½®

### `project.config.json`
**åŠŸèƒ½**: å¾®ä¿¡å¼€å‘è€…å·¥å…·é…ç½®
**å†…å®¹**:
- é¡¹ç›®åç§°
- AppID
- ç¼–è¯‘è®¾ç½®

---

## ğŸ—‚ï¸ ç›®å½•ç»“æ„æ€»è§ˆ

```
ai-med-companion/
â”œâ”€â”€ pages/                  # ä¸»åŒ…é¡µé¢ï¼ˆé¦–é¡µã€ä¸ªäººä¸­å¿ƒã€ç¤¾åŒºï¼‰
â”‚   â”œâ”€â”€ index/             # é¦–é¡µ
â”‚   â”œâ”€â”€ mine/              # ä¸ªäººä¸­å¿ƒ
â”‚   â””â”€â”€ community/         # ç¤¾åŒº
â”‚
â”œâ”€â”€ pagesA/                # åˆ†åŒ…A - AIåŠŸèƒ½
â”‚   â”œâ”€â”€ ai-doctor/         # AIé—®è¯Š
â”‚   â””â”€â”€ image-diagnose/    # å›¾åƒè¯Šæ–­
â”‚
â”œâ”€â”€ pagesB/                # åˆ†åŒ…B - ç”¨æˆ·åŠŸèƒ½
â”‚   â”œâ”€â”€ mine/              # ç™»å½•ã€æ³¨å†Œã€è®¾ç½®
â”‚   â””â”€â”€ community/         # ç¤¾åŒºè¯¦æƒ…
â”‚
â”œâ”€â”€ uniCloud-aliyun/       # uniCloudäº‘æœåŠ¡
â”‚   â””â”€â”€ cloudfunctions/    # äº‘å‡½æ•°
â”‚       â”œâ”€â”€ wechatLogin/   # å¾®ä¿¡ç™»å½•
â”‚       â”œâ”€â”€ decryptWechatSteps/ # è§£å¯†æ­¥æ•°
â”‚       â””â”€â”€ getHealthData/ # è·å–å¥åº·æ•°æ®
â”‚
â”œâ”€â”€ utils/                 # å·¥å…·ç±»
â”‚   â”œâ”€â”€ ai-service.js      # AIæœåŠ¡
â”‚   â”œâ”€â”€ health-service.js  # å¥åº·æ•°æ®æœåŠ¡
â”‚   â””â”€â”€ image-analysis.js  # å›¾åƒåˆ†æ
â”‚
â”œâ”€â”€ config/                # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ ai-config.js       # AIé…ç½®
â”‚   â”œâ”€â”€ health-config.js   # å¥åº·æ•°æ®é…ç½®
â”‚   â”œâ”€â”€ cloud-config.js    # äº‘æœåŠ¡é…ç½®
â”‚   â””â”€â”€ wechat-config.js   # å¾®ä¿¡é…ç½®
â”‚
â”œâ”€â”€ static/                # é™æ€èµ„æº
â”‚   â”œâ”€â”€ icons/             # åŠŸèƒ½å›¾æ ‡
â”‚   â”œâ”€â”€ images/            # å›¾ç‰‡ç´ æ
â”‚   â”œâ”€â”€ tabbar/            # åº•éƒ¨å¯¼èˆªå›¾æ ‡
â”‚   â””â”€â”€ logo.png           # Logo
â”‚
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”‚   â””â”€â”€ IMAGE_OPTIMIZATION.md
â”‚
â”œâ”€â”€ manifest.json          # UniAppé…ç½® â­
â”œâ”€â”€ pages.json             # é¡µé¢è·¯ç”±é…ç½® â­
â”œâ”€â”€ main.js                # é¡¹ç›®å…¥å£ â­
â”œâ”€â”€ App.vue                # å…¨å±€åº”ç”¨é…ç½®
â”œâ”€â”€ package.json           # npmä¾èµ–
â””â”€â”€ uni.scss               # å…¨å±€æ ·å¼å˜é‡
```

---

## ğŸ”„ æ•°æ®æµç¨‹å›¾

### å¾®ä¿¡ç™»å½•æµç¨‹
```
ç”¨æˆ·ç‚¹å‡»ç™»å½•
  â†“
uni.login() è·å–code
  â†“
è°ƒç”¨äº‘å‡½æ•° wechatLogin
  â†“
äº‘å‡½æ•°è°ƒç”¨å¾®ä¿¡API
  â†“
è¿”å› openid + session_key
  â†“
æŸ¥è¯¢/åˆ›å»ºç”¨æˆ·è®°å½•
  â†“
è¿”å› token + userInfo
  â†“
ä¿å­˜åˆ°æœ¬åœ°ç¼“å­˜
  â†“
ç™»å½•æˆåŠŸ
```

### å¥åº·æ•°æ®åŒæ­¥æµç¨‹
```
ç”¨æˆ·ç‚¹å‡»åŒæ­¥
  â†“
è·å–å¾®ä¿¡è¿åŠ¨æƒé™
  â†“
wx.getWeRunData() è·å–åŠ å¯†æ•°æ®
  â†“
è°ƒç”¨äº‘å‡½æ•° decryptWechatSteps
  â†“
è§£å¯†æ•°æ®
  â†“
è¿”å›æ­¥æ•°
  â†“
ä¿å­˜åˆ°æœ¬åœ°ç¼“å­˜
  â†“
æ›´æ–°UIæ˜¾ç¤º
```

### AIé—®è¯Šæµç¨‹
```
ç”¨æˆ·å‘é€æ¶ˆæ¯
  â†“
è°ƒç”¨ ai-service.sendMessage()
  â†“
æ ¹æ®é…ç½®é€‰æ‹©AIå¹³å°
  â†“
è°ƒç”¨AI APIï¼ˆé˜¿é‡Œäº‘/ChatGLM/Qwenï¼‰
  â†“
è¿”å›AIå›å¤
  â†“
æ˜¾ç¤ºåœ¨èŠå¤©ç•Œé¢
  â†“
ä¿å­˜å†å²è®°å½•
```

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·æ¨¡å—
- ç™»å½•/æ³¨å†Œï¼ˆå¾®ä¿¡ç™»å½• + è´¦å·å¯†ç ï¼‰
- ä¸ªäººä¿¡æ¯ç®¡ç†
- ä¼šå‘˜ç³»ç»Ÿ
- é€€å‡ºç™»å½•

### 2. AIé—®è¯Šæ¨¡å—
- å¤šAIå¹³å°æ”¯æŒ
- èŠå¤©å¯¹è¯
- å†å²è®°å½•
- å¿«æ·é—®é¢˜

### 3. å›¾åƒè¯Šæ–­æ¨¡å—
- å›¾ç‰‡ä¸Šä¼ 
- AIåˆ†æ
- è¯Šæ–­æŠ¥å‘Š
- å†å²è®°å½•

### 4. å¥åº·æ•°æ®æ¨¡å—
- å¾®ä¿¡è¿åŠ¨æ­¥æ•°
- ç¡çœ æ•°æ®ï¼ˆå¼€å‘ä¸­ï¼‰
- å¿ƒç‡æ•°æ®ï¼ˆå¼€å‘ä¸­ï¼‰
- è¡€å‹æ•°æ®ï¼ˆå¼€å‘ä¸­ï¼‰
- æ•°æ®åŒæ­¥
- æ•°æ®å¯è§†åŒ–

### 5. ç¤¾åŒºæ¨¡å—
- å¸–å­åˆ—è¡¨
- åˆ†ç±»æµè§ˆ
- ç‚¹èµ/è¯„è®º/åˆ†äº«
- å¸–å­è¯¦æƒ…

---

## ğŸ”‘ å…³é”®æŠ€æœ¯ç‚¹

### 1. åˆ†åŒ…åŠ è½½
**ç›®çš„**: å‡å°‘ä¸»åŒ…å¤§å°ï¼Œæå‡é¦–å±åŠ è½½é€Ÿåº¦
**é…ç½®**: `pages.json`
**æ•ˆæœ**: ä¸»åŒ… < 1.5M

### 2. ä»£ç å‹ç¼©
**ç›®çš„**: å‡å°ä»£ç ä½“ç§¯
**é…ç½®**: `manifest.json`
```json
{
  "es6": true,
  "minified": true,
  "postcss": true
}
```

### 3. å¾®ä¿¡ç™»å½•
**æŠ€æœ¯**: uni.login() + äº‘å‡½æ•°
**åŠ å¯†**: session_key
**å­˜å‚¨**: uniCloudæ•°æ®åº“

### 4. å¥åº·æ•°æ®åŠ å¯†
**ç®—æ³•**: AES-128-CBC
**å¯†é’¥**: session_key
**è§£å¯†**: äº‘å‡½æ•° decryptWechatSteps

### 5. AIæœåŠ¡é›†æˆ
**å¹³å°**: é˜¿é‡Œäº‘ç™¾ç‚¼ã€ChatGLMã€Qwen
**æ¥å£**: HTTP POST
**æ ¼å¼**: JSON

---

## ğŸ“Š é¡¹ç›®è§„æ¨¡

- **æ€»é¡µé¢æ•°**: çº¦12ä¸ª
- **äº‘å‡½æ•°æ•°**: 4ä¸ª
- **å·¥å…·ç±»**: 4ä¸ª
- **é…ç½®æ–‡ä»¶**: 5ä¸ª
- **ä»£ç è¡Œæ•°**: çº¦8000+è¡Œ
- **é™æ€èµ„æº**: çº¦5MBï¼ˆå¾…ä¼˜åŒ–ï¼‰

---

## âš ï¸ å¾…ä¼˜åŒ–é¡¹

### 1. å›¾ç‰‡å‹ç¼©
æ‰€æœ‰å¤§äº100KBçš„å›¾ç‰‡éœ€è¦å‹ç¼©åˆ°åˆç†å¤§å°

### 2. åŠŸèƒ½å®Œå–„
- å¿˜è®°å¯†ç 
- ç”¨æˆ·åè®®
- éšç§æ”¿ç­–
- å…³äºæˆ‘ä»¬
- æ„è§åé¦ˆ

### 3. æ•°æ®åº“è®¾è®¡
éœ€è¦åœ¨uniCloudä¸­åˆ›å»ºå®Œæ•´çš„æ•°æ®åº“è¡¨ç»“æ„

### 4. é”™è¯¯å¤„ç†
å¢åŠ æ›´å®Œå–„çš„é”™è¯¯æç¤ºå’Œå¼‚å¸¸å¤„ç†

---

**æ–‡æ¡£æ›´æ–°æ—¶é—´**: 2025-10-22 23:46
**é¡¹ç›®ç‰ˆæœ¬**: v1.0.0
**æŠ€æœ¯æ ˆ**: UniApp + Vue 2 + uniCloud + é˜¿é‡Œäº‘ç™¾ç‚¼
